#{extends 'newAutoTitle/newAutoTitleBase.html' /}
#{set title:'自动标题' /}

<style type="text/css">



    .auto-title-container {
        padding: 10px; font-family: "微软雅黑"; font-size: 14px;
    }


    input[type="radio"] {
        cursor: pointer;
    }
    input[type="text"] {
        padding-left: 5px;
    }

    .item-table {

    }
    .item-table tbody td {
        padding: 7px 0px;
    }
    .item-table .item-img {
        width: 70px; height: 70px; cursor: pointer;
    }
    .item-table input[type=checkbox] {
        cursor: pointer;
    }
    .item-table .item-title {
        cursor: pointer;
    }


    .check-span {
        cursor: pointer;
    }
    .radio-span {
        cursor: pointer;
    }
    .select35{
        height: 35px;
    }
    .search-container{
        border: 1px solid #ccc;
        margin: 0px 0px 20px 0px;
        padding: 20px 0px 20px 20px;
        background: #efefef;
    }

    .lay-out-table {
        border-collapse: collapse;
    }
    .lay-out-table tbody td {
        padding: 5px 0px; border: none;
    }

    .config-tip-td {
        font-weight: bold;
    }

    .optimize-tab-table {
        border-collapse: collapse;
    }
    .optimize-tab-table tbody td {
        border: none;
    }

    .optimize-tab {
        display: block; cursor: pointer;
        margin: 7px 0;
        width: 125px;
        height: 35px; line-height: 35px;
        border: 1px solid #ccc;
        background-color: white;
        text-align: center;
        border-radius: 4px;
        -moz-border-radius: 4px;
        -webkit-border-radius: 4px;
        -o-border-radius: 4px;
    }
    .optimize-tab.select {
        border: 1px solid #0095B1;
        background-color: #0095B1;
        color: white;
    }
    .optimize-tab:hover {
        border: 1px solid #0095B1;
        background-color: #0095B1;
        color: white;
    }

    .tab-target-div {
        display: none;
    }

    .click-add-word-div {
        display: inline-block; *display: inline; zoom: 1; cursor: pointer;
        padding: 5px 15px; border: 1px solid #999; margin: 5px 10px;
    }
    .click-add-word-div:hover {
        color: #a10000;
    }

    .diag-res-table tbody td {
        padding: 10px 0px; border-bottom: 1px solid #ccc;
    }
    .word-res-table tbody td {
        padding: 7px 0px; border-bottom: 1px solid #ccc;
    }


    .item-prop-word-table {
        border-collapse: collapse; width: 100%; border: 1px solid #ccc;
    }
    .item-prop-word-table tbody td {
        border: 1px solid #ccc;
    }

    .history-title-table tbody td {
        padding: 7px 5px; border-bottom: 1px solid #ccc;
    }

</style>


<div class="auto-title-container">

    <div class="search-container">
        <table style="border-collapse: collapse; ">
            <tbody>
            <tr>
                <td style="">
                    <span>宝贝标题：</span>
                    <input type="text" class="search-text select35" style="width: 150px;"/>
                </td>
                <td style="padding-left: 10px;">
                    <select class="tb-category-select select35" style="width: 130px;">
                        <option value="0" selected="selected">所有淘宝类目</option>
                    </select>
                </td>
                <td style="padding-left: 10px;">
                    <select class="seller-category-select select35" style="width: 130px;">
                        <option value="0" selected="selected">所有店铺分类</option>
                    </select>
                </td>
                <td style="padding-left: 10px;">
                    <select class="state-select select35" style="width: 130px;">
                        <option value="2" selected="selected">所有宝贝状态</option>
                        <option value="0">在架宝贝</option>
                        <option value="1">仓库中的宝贝</option>
                    </select>
                </td>
                <td style="padding-left: 10px;">
                    得分:
                    <input type="text" class="start-score-text score-text" style="width: 40px;" value="0">
                    -
                    <input type="text" class="end-score-text score-text" style="width: 40px;"  value="100">
                </td>
                <td style="padding-left: 20px;">
                    <span class="tmbtn sky-blue-btn search-btn">搜索宝贝</span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>


    <div style="padding-top: 10px;padding-bottom: 10px;text-align: left;">
        <table style="border-collapse: collapse;">
            <tbody>
            <tr>
                <td style="text-align: left;font-size: 16px;">
                    对&nbsp;<span class="red-bold">所有满足上方搜索条件</span>&nbsp;的宝贝：
                </td>
                <td style="padding-left: 20px;">
                    <span class="tmbtn too-wide-yellow-btn all-recommend-btn">一键宝贝推荐标题</span>
                </td>
                <td style="padding-left: 40px;">
                    <span class="tmbtn too-wide-yellow-btn all-guanfang-btn">一键宝贝官方标题</span>
                </td>
                <td style="padding-left: 40px;">
                    <span class="tmbtn too-wide-yellow-btn all-guanfang-recommend-btn">一键官方推荐标题</span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="paging-div" style="padding-bottom: 5px;text-align: center;"></div>

    <table class="item-table list-table">
        <thead>
        <tr>
            <td style="width: 10%;">宝贝图片</td>
            <td style="width: 24%;">宝贝标题</td>
            <td style="width: 11%;"><div class="sort-td sort-down" orderBy="salesCount">标题得分</div></td>
            <td style="width: 11%;">下架时间</td>
            <td style="width: 14%;">优化状态</td>
            <td style="width: 13%;">操作</td>
        </tr>
        </thead>
        <tbody class="item-tbody"></tbody>
    </table>

    <div class="paging-div" style="padding-top: 5px;text-align: center;"></div>


</div>


<script src="/js/jquery.tmpl.js" type="text/javascript"></script>



<script type="text/x-jquery-tmpl" id="itemTitleRowTmpl">

    <tr class="item-tr">
        <td>
            <a class="item-link" target="_blank" href="{{= itemLink}}">
                <img class="item-img" src="{{= picURL}}_120x120.jpg" />
            </a>
        </td>
        <td>
            <a class="item-link" target="_blank" href="{{= itemLink}}">
                <span class="item-title" style="color: #333;">{{= title}}</span>
            </a>
        </td>

        <td><div class="red-bold">{{= score}}&nbsp;分</div></td>
        <td><p>{{= delistWeekDay}}</p><p style="padding-top: 5px;">{{= delistHHmmss}}</p></td>

        {{if optimised == true}}
        <td>
            <div>{{= lastOptimiseTsStr}}</div>
            <div style="padding-top: 5px;">已优化</div>
        </td>
        {{else}}
        <td><span class="red">未优化过</span> </td>
        {{/if}}

        <td><span class="tmbtn wide-sky-blue-btn optimize-item-btn" numIid="{{= numIid}}">诊断优化标题</span> </td>
    </tr>
    <tr class="item-diag-op-tr" style="display: none;">
        <td colspan="6" class="item-diag-op-td">

        </td>
    </tr>


</script>

<script type="text/x-jquery-tmpl" id="recommendTitleDialogTmpl">

    <div class="recommend-item-titles-dialog-div">
        <div style="padding: 30px 0px 0px 30px;">

            <table class="lay-out-table recommend-config-table">
                <tbody >
                <tr>
                    <td class="config-tip-td">是否优化有销量宝贝：</td>
                    <td>
                        <input type="radio" name='sales-config-radio' value="true" /><span class="radio-span">是</span>
                    </td>
                    <td style="padding-left: 20px;">
                        <input type="radio" name='sales-config-radio' value="false" checked="checked" /><span class="radio-span">否，我要跳过有销量的宝贝</span>
                    </td>
                </tr>
                <tr>
                    <td class="config-tip-td">是否保留品牌：</td>
                    <td>
                        <input type="radio" name='brand-config-radio' value="true" checked="checked" /><span class="radio-span">是</span>
                    </td>
                    <td style="padding-left: 20px;">
                        <input type="radio" name='brand-config-radio' value="false" /><span class="radio-span">否</span>
                    </td>
                </tr>
                <tr>
                    <td class="config-tip-td">是否保留货号：</td>
                    <td>
                        <input type="radio" name='serial-config-radio' value="true" checked="checked" /><span class="radio-span">是</span>
                    </td>
                    <td style="padding-left: 20px;">
                        <input type="radio" name='serial-config-radio' value="false" /><span class="radio-span">否</span>
                    </td>
                </tr>
                <tr>
                    <td class="config-tip-td">是否保留数字：</td>
                    <td>
                        <input type="radio" name='number-config-radio' value="false" checked="checked" /><span class="radio-span">是</span>
                    </td>
                    <td style="padding-left: 20px;">
                        <input type="radio" name='number-config-radio' value="true" /><span class="radio-span">否</span>
                    </td>
                </tr>
                <tr>
                    <td class="config-tip-td">是否保留颜色：</td>
                    <td>
                        <input type="radio" name='color-config-radio' value="false" checked="checked" /><span class="radio-span">是</span>
                    </td>
                    <td style="padding-left: 20px;">
                        <input type="radio" name='color-config-radio' value="true" /><span class="radio-span">否</span>
                    </td>
                </tr>
                <tr>
                    <td class="config-tip-td">是否添加促销词：</td>
                    <td>
                        <input type="radio" name='promote-config-radio' value="true" checked="checked" /><span class="radio-span">是</span>
                    </td>
                    <td style="padding-left: 20px;">
                        <input type="radio" name='promote-config-radio' value="false" /><span class="radio-span">否</span>
                    </td>
                </tr>
                <tr>
                    <td class="config-tip-td">标题头部固定词:</td>
                    <td colspan="2"><input type="text" name="fixedStart" style="width:200px"></td>
                </tr>
                <tr>
                    <td class="config-tip-td" style="padding-right: 10px;">标题过滤以下词(以<span style="color: red;">空格</span>分割):</td>
                    <td colspan="2"><input type="text" name="mustExcluded" style="width:200px"></td>
                </tr>

                </tbody>
            </table>
        </div>


    </div>

</script>



<script type="text/x-jquery-tmpl" id="optimizeTitleTmpl">

    <td colspan="6" style="padding: 10px;">
        <div style="text-align: center;">
            <table class="lay-out-table" style="margin: 0 auto;">
                <tbody>
                <tr>
                    <td style="font-size: 16px;">宝贝类目：</td>
                    <td style="text-align: left;"><span class="item-cat-name-span" style="color:blue;"></span> </td>
                </tr>
                <tr>
                    <td style="font-size: 16px;">新的标题：</td>
                    <td>
                        <div style="display: inline;">
                            <input type="text" class="new-item-title-input" style="width: 370px;height: 28px; line-height: 28px;" />
                        </div>

                    </td>
                    <td style="padding-left: 20px;"><span class="tmbtn yellow-btn save-new-title-btn">保存新标题</span> </td>
                    <td style="padding-left: 20px;"><span class="tmbtn sky-blue-btn diagnose-new-title-btn">诊断新标题</span> </td>
                    <td style="padding-left: 20px;"><span class="tmbtn long-flat-green-btn show-recommend-title-btn">查看推荐标题</span> </td>
                </tr>

                </tbody>
            </table>
        </div>
        <div>
            <table class="optimize-tab-table" style="margin-top: 5px;">
                <tbody>
                <tr>
                    <td style="vertical-align: top;">
                        <span class="optimize-tab select" targetDiv="diag-new-title-div">诊断新标题</span>
                        <span class="optimize-tab" targetDiv="search-more-word-div">搜更多词</span>
                        <span class="optimize-tab" targetDiv="cat-hot-word-div">类目热搜词</span>
                        *{<span class="optimize-tab" targetDiv="cat-heima-word-div">类目黑马词</span>}*
                        <span class="optimize-tab" targetDiv="item-prop-word-div">当前宝贝属性</span>
                        <span class="optimize-tab" targetDiv="promote-word-div">促销词推荐</span>
                        <span class="optimize-tab" targetDiv="item-history-title-div">标题优化记录</span>
                    </td>
                    <td style="vertical-align: top;padding-left: 10px;text-align: left;">
                        <div style="border: 1px solid #ccc;width: 780px;padding: 10px;">
                            <div class="tab-target-div diag-new-title-div"></div>
                            <div class="tab-target-div promote-word-div" style="text-align: left;"></div>
                            <div class="tab-target-div search-more-word-div"></div>
                            <div class="tab-target-div cat-hot-word-div"></div>
                            <div class="tab-target-div cat-heima-word-div"></div>
                            <div class="tab-target-div item-prop-word-div"></div>
                            <div class="tab-target-div item-history-title-div"></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </td>


</script>





<script type="text/x-jquery-tmpl" id="diagnoseTitleTmpl">

    <div style="text-align: left;">
        <div style="padding-left: 20px;">
            <table class="lay-out-table">
                <tbody>
                <tr>
                    <td style="font-weight: bold;">当前诊断标题：</td>
                    <td>{{= title}}</td>
                    <td style="font-weight: bold;padding-left: 40px;">诊断结果：</td>
                    <td style="padding-left: 10px;">
                        <span class="red-bold title-score-span" style="font-size: 20px;"></span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div>
            <table class="list-table diag-res-table">
                <thead>
                <tr>
                    <td style="width: 20%;">优化建议</td>
                    <td style="width: 20%;">优化类型</td>
                    <td style="width: 60%;">诊断结果</td>
                </tr>
                </thead>
                <tbody class="diag-res-tbody">
                <tr>
                    <td class="title-length-tip"></td>
                    <td style="font-weight: bold;">标题字数</td>
                    <td class="title-length-res"></td>
                </tr>
                <tr>
                    <td class="title-punctuation-tip"></td>
                    <td style="font-weight: bold;">标点符号</td>
                    <td class="title-punctuation-res"></td>
                </tr>
                <tr>
                    <td class="cat-prop-tip"></td>
                    <td style="font-weight: bold;">宝贝属性设置</td>
                    <td class="cat-prop-res"></td>
                </tr>
                <tr>
                    <td class="item-prop-tip"></td>
                    <td style="font-weight: bold;">标题包含宝贝属性</td>
                    <td class="item-prop-res"></td>
                </tr>
                <tr>
                    <td class="dump-word-tip"></td>
                    <td style="font-weight: bold;">重复关键词</td>
                    <td class="dump-word-res"></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>


</script>




<script type="text/x-jquery-tmpl" id="searchMoreWordTmpl">

    <div style="text-align: left;">
        <div style="padding-left: 20px;">
            <table class="lay-out-table">
                <tbody>
                <tr>
                    <td>关键词：</td>
                    <td><input type="text" class="search-more-word-text" style="width: 150px;" /> </td>
                    <td style="padding-left: 20px;">
                        <span class="tmbtn sky-blue-btn search-more-word-btn">搜索</span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <div class="paging-div" style="text-align: center;padding-top: 5px;"></div>
        <table class="list-table more-word-res-table word-res-table">
            <thead>
            <tr>
                <td style="width: 20%;">关键词</td>
                <td style="width: 13%;"><div class="sort-td sort-down current-sort" orderBy="pv">展现量</div></td>
                <td style="width: 13%;"><div class="sort-td sort-up" orderBy="click">点击量</div></td>
                <td style="width: 11%;">点击率</td>
                <td style="width: 11%;">转化率</td>
                <td style="width: 12%;"><div class="sort-td sort-up" orderBy="scount">宝贝数</div></td>
                <td style="width: 12%;"><div class="sort-td sort-up" orderBy="score">性价比</div></td>
            </tr>
            </thead>
            <tbody class="more-word-res-tbody">

            </tbody>
        </table>
        <div class="paging-div" style="text-align: center;"></div>
    </div>


</script>


<script type="text/x-jquery-tmpl" id="moreWordRowTmpl">

    <tr>
        <td style="padding: 5px 5px;">
            {{= word}}
        </td>
        <td>{{= pv}}</td>
        <td>{{= click}}</td>
        <td>{{= clickRate}}</td>
        <td>{{= transRate}}</td>
        <td>{{= scount}}</td>
        <td>{{= newScore}}</td>
    </tr>


</script>




<script type="text/x-jquery-tmpl" id="catHotWordTmpl">

    <div style="text-align: left;">
        <div style="padding-left: 20px;">
            <table class="lay-out-table">
                <tbody>
                <tr>
                    <td>一级类目：</td>
                    <td><select class="first-cat-select" style="width: 130px;"></select> </td>
                    <td style="padding-left: 20px;">二级类目：</td>
                    <td><select class="second-cat-select" style="width: 130px;"></select> </td>
                    <td style="padding-left: 20px;">三级类目：</td>
                    <td><select class="third-cat-select" style="width: 130px;"></select> </td>
                </tr>
                </tbody>
            </table>
        </div>

        <div class="paging-div" style="text-align: center;padding-top: 5px;"></div>
        <table class="list-table cat-hot-word-table word-res-table">
            <thead>
            <tr>
                <td style="width: 20%;">关键词</td>
                <td style="width: 13%;"><div class="sort-td sort-down current-sort" orderBy="pv">展现量</div></td>
                <td style="width: 13%;"><div class="sort-td sort-up" orderBy="click">点击量</div></td>
                <td style="width: 11%;"><div class="sort-td sort-up" orderBy="ctrInt">点击率</div></td>
                <td style="width: 12%;"><div class="sort-td sort-up" orderBy="itemCount">宝贝数</div></td>
                <td style="width: 12%;">性价比</td>
            </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
        <div class="paging-div" style="text-align: center;"></div>
    </div>


</script>


<script type="text/x-jquery-tmpl" id="catHotRowTmpl">

    <tr>
        <td style="padding: 5px 5px;">
            {{= word}}
        </td>
        <td>{{= pv}}</td>
        <td>{{= click}}</td>
        <td>{{= clickRate}}</td>
        <td>{{= itemCount}}</td>
        <td>{{= newScore}}</td>
    </tr>


</script>



<script type="text/x-jquery-tmpl" id="itemPropWordTmpl">

    <div style="text-align: left;padding: 10px;">
        <table class="item-prop-word-table">
            <tbody></tbody>
        </table>
    </div>


</script>



<script type="text/x-jquery-tmpl" id="itemHistoryTitleTmpl">

    <div style="text-align: left;">

        <div class="paging-div" style="text-align: center;padding-top: 5px;"></div>
        <table class="list-table history-title-table">
            <thead>
            <tr>
                <td style="width: 20%;">优化时间</td>
                <td style="width: 30%;">原始标题</td>
                <td style="width: 30%;">新标题</td>
                <td style="width: 15%;">操作</td>
            </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
        <div class="paging-div" style="text-align: center;"></div>
    </div>


</script>


<script type="text/x-jquery-tmpl" id="historyTitleRowTmpl">

    <tr>
        <td>{{= updateTimeStr}}</td>
        <td>{{= oldTitle}}</td>
        <td>{{= newTitle}}</td>
        <td><span class="tmbtn sky-blue-btn recover-title-btn" numIid="{{= numIid}}"  originTitle="{{= oldTitle}}" title="把当前宝贝标题改为原始标题">还原标题</span> </td>
    </tr>


</script>





<script type="text/javascript">

    TM.Loading.init.show();

    TM.gcs('/js/tm.js', function () {
        TM.gcs('/js/newAutoTitle/autotitleutil.js',function(){
            TM.gcs('/js/newAutoTitle/autotitleadmin.js?_v=2',function(){
                TM.gcs('/js/newAutoTitle/optimizeadmin.js',function(){
                    TM.gcs('/js/jquery.inputlimitor.1.0.js',function(){
                        $(document).ready(function() {
                            TM.AutoTitleAdmin.init.doInit($('.auto-title-container'));
                        });
                    });
                });
            });
        });
    });
</script>